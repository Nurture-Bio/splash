@import "tailwindcss";

/*
 * ═══════════════════════════════════════════════════════════════════════
 *  NURTURE BIO — DESIGN SYSTEM
 * ═══════════════════════════════════════════════════════════════════════
 *
 *  AXIOMS
 *  ──────
 *  base         1rem        16px — WCAG SC 1.4.4
 *  ratio        1.333       Perfect fourth — confident, not showy
 *  grid         0.5rem      8px spatial constant
 *  φ            1.618034    Golden ratio (timing)
 *  t₀           160ms       Perceptual threshold (Nielsen)
 *  hue-surface  250         Midnight navy (OKLCH)
 *  hue-accent   195         Electric cyan (OKLCH)
 *  hue-second   280         Soft violet (OKLCH)
 *  L-bg         0.120       Deep midnight luminance
 *  L-step       0.040       Weber elevation increment
 *
 *  TYPE SCALE  (1 × 1.333^n)
 *  ──────────────────────────
 *  xs    0.563rem    9px     n=-2
 *  sm    0.750rem    12px    n=-1
 *  base  1rem        16px    n= 0
 *  md    1.333rem    21px    n=+1
 *  lg    1.777rem    28px    n=+2
 *  xl    2.369rem    38px    n=+3
 *  2xl   3.157rem    50px    n=+4
 *  3xl   4.209rem    67px    n=+5
 *
 *  TIMING  (φ-derived)
 *  ────────────────────
 *  instant   61ms     t₀/φ²
 *  fast      99ms     t₀/φ
 *  base      160ms    t₀
 *  ease      259ms    t₀×φ
 *  slow      419ms    t₀×φ²
 *  drift     678ms    t₀×φ³
 *
 * ═══════════════════════════════════════════════════════════════════════
 */

@theme {
  /* ── surfaces (midnight navy, L-bg + n×L-step) ─────── */
  --color-void:      oklch(0.120 0.020 250);
  --color-base:      oklch(0.160 0.024 250);
  --color-raised:    oklch(0.200 0.028 250);
  --color-elevated:  oklch(0.240 0.032 250);

  /* ── electric cyan accent ──────────────────────────── */
  --color-cyan:      oklch(0.750 0.180 195);
  --color-cyan-dim:  oklch(0.540 0.120 195);
  --color-cyan-wash: oklch(0.220 0.040 195);

  /* ── soft violet secondary ─────────────────────────── */
  --color-violet:      oklch(0.620 0.150 280);
  --color-violet-dim:  oklch(0.440 0.100 280);
  --color-violet-wash: oklch(0.200 0.040 280);

  /* ── text ──────────────────────────────────────────── */
  --color-fg:        oklch(0.930 0.008 250);
  --color-fg-2:      oklch(0.650 0.015 250);
  --color-fg-3:      oklch(0.440 0.012 250);

  /* ── borders ───────────────────────────────────────── */
  --color-line:      oklch(0.260 0.020 250);
  --color-line-2:    oklch(0.340 0.024 250);

  /* ── glow tokens ───────────────────────────────────── */
  --glow-cyan:   0 0 24px oklch(0.750 0.180 195 / 0.25);
  --glow-violet: 0 0 24px oklch(0.620 0.150 280 / 0.20);

  /* ── type scale ────────────────────────────────────── */
  --text-xs:   0.563rem;
  --text-sm:   0.750rem;
  --text-base: 1rem;
  --text-md:   1.333rem;
  --text-lg:   1.777rem;
  --text-xl:   2.369rem;
  --text-2xl:  3.157rem;
  --text-3xl:  4.209rem;

  /* ── fonts ─────────────────────────────────────────── */
  --font-sans:  "DM Sans", system-ui, sans-serif;

  /* ── timing ────────────────────────────────────────── */
  --t-instant:  61ms;
  --t-fast:     99ms;
  --t-base:     160ms;
  --t-ease:     259ms;
  --t-slow:     419ms;
  --t-drift:    678ms;

  /* ── easing ────────────────────────────────────────── */
  --ease-out:   cubic-bezier(0.16, 1, 0.3, 1);
  --ease-in:    cubic-bezier(0.7, 0, 0.84, 0);
  --ease-move:  cubic-bezier(0.22, 1, 0.36, 1);

  /* ── radius ────────────────────────────────────────── */
  --radius-sm:   0.25rem;
  --radius-md:   0.5rem;
  --radius-lg:   0.875rem;
  --radius-xl:   1.25rem;
  --radius-full: 9999px;
}

/* ═══ BASE ═══════════════════════════════════════════════════════════ */

@layer base {
  *, *::before, *::after { box-sizing: border-box; }

  html {
    scroll-behavior: smooth;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  body {
    margin: 0;
    background: var(--color-void);
    color: var(--color-fg);
    font-family: var(--font-sans);
    font-size: var(--text-base);
    line-height: 1.6;
  }

  ::selection {
    background: oklch(0.540 0.120 195 / 0.30);
    color: var(--color-fg);
  }

  :focus-visible {
    outline: 1.5px solid var(--color-cyan);
    outline-offset: 2px;
  }

  ::-webkit-scrollbar { width: 5px; }
  ::-webkit-scrollbar-track { background: transparent; }
  ::-webkit-scrollbar-thumb { background: var(--color-line); border-radius: 999px; }
}

/* ═══ COMPONENT PRESETS ══════════════════════════════════════════════ */

@layer components {

  /* ── layout ──────────────────────────────────────────── */

  .container-site {
    @apply mx-auto w-full px-6 md:px-10;
    max-width: 72rem;
  }

  .section-gap {
    @apply py-24 md:py-36;
  }

  /* ── navigation ─────────────────────────────────────── */

  .nav-bar {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    z-index: 50;
    transition: background-color var(--t-ease) var(--ease-out),
                border-color var(--t-ease) var(--ease-out),
                backdrop-filter var(--t-ease) var(--ease-out);
    background: transparent;
    border-bottom: 1px solid transparent;
  }

  .nav-bar--scrolled {
    background: oklch(0.120 0.020 250 / 0.80);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border-bottom-color: var(--color-line);
  }

  .nav-links {
    @apply flex items-center gap-6;
    list-style: none;
    margin: 0;
    padding: 0;
  }

  .nav-link {
    font-family: var(--font-sans);
    font-size: var(--text-sm);
    font-weight: 500;
    letter-spacing: 0.04em;
    color: var(--color-fg-3);
    text-decoration: none;
    transition: color var(--t-fast) var(--ease-out);
  }
  .nav-link:hover {
    color: var(--color-fg);
  }

  /* ── data mesh ──────────────────────────────────────── */

  .mesh-node {
    animation: node-pulse 3s ease-in-out infinite;
  }

  .mesh-edge {
    animation: edge-breathe 4s ease-in-out infinite;
  }

  .mesh-glow {
    filter: url(#mesh-glow-filter);
  }

  /* ── hero display ──────────────────────────────────── */

  .display-hero {
    font-family: var(--font-sans);
    font-weight: 700;
    line-height: 1.0;
    letter-spacing: -0.04em;
    color: var(--color-fg);
    font-size: clamp(3rem, 10vw, var(--text-3xl));
  }

  /* ── section headline ──────────────────────────────── */

  .headline-section {
    font-family: var(--font-sans);
    font-weight: 600;
    line-height: 1.15;
    letter-spacing: -0.025em;
    color: var(--color-fg);
    font-size: var(--text-lg);
  }

  /* ── narrow prose column ───────────────────────────── */

  .prose-narrow {
    max-width: 28rem;
    margin-inline: auto;
  }

  /* ── footer ────────────────────────────────────────── */

  .footer-site {
    border-top: 1px solid var(--color-line);
    @apply py-10 flex flex-col sm:flex-row items-center justify-between gap-3;
  }

  /* ── hero bottom fade ──────────────────────────────── */

  .hero-fade-bottom {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 10rem;
    background: linear-gradient(to bottom, transparent, var(--color-base));
    pointer-events: none;
  }

  /* ── buttons ────────────────────────────────────────── */

  .btn-base {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    flex-shrink: 0;
    font-family: var(--font-sans);
    font-weight: 500;
    cursor: pointer;
    user-select: none;
    border: none;
    translate: 0 0;
    transition: color var(--t-ease) var(--ease-out),
                background-color var(--t-ease) var(--ease-out),
                border-color var(--t-ease) var(--ease-out),
                box-shadow var(--t-ease) var(--ease-out),
                translate var(--t-ease) var(--ease-out);
  }
  .btn-base:disabled {
    opacity: 0.4;
    pointer-events: none;
  }

  .btn-cyan {
    background: var(--color-cyan);
    color: var(--color-void);
    border-radius: 9999px;
    box-shadow: 0 0 0px oklch(0.750 0.180 195 / 0);
  }
  .btn-cyan:hover {
    translate: 0 -1px;
    box-shadow: 0 0 28px oklch(0.750 0.180 195 / 0.35);
  }
  .btn-cyan:active {
    translate: 0 0;
    box-shadow: 0 0 0px oklch(0.750 0.180 195 / 0);
  }

  .btn-ghost {
    background: transparent;
    color: var(--color-fg-2);
    border-radius: 9999px;
    border: 1px solid var(--color-line-2);
  }
  .btn-ghost:hover {
    color: var(--color-fg);
    border-color: var(--color-fg-3);
    translate: 0 -1px;
  }
  .btn-ghost:active {
    translate: 0 0;
  }

  .btn-bare {
    background: transparent;
    color: var(--color-fg-2);
    padding: 0;
    border-radius: 0;
    text-decoration: underline;
    text-underline-offset: 4px;
    text-decoration-color: var(--color-line-2);
  }
  .btn-bare:hover {
    color: var(--color-fg);
    text-decoration-color: var(--color-fg-3);
  }

  .btn-sm { padding: 0.5rem 1.25rem;  font-size: var(--text-sm); letter-spacing: 0.025em; }
  .btn-md { padding: 0.625rem 1.75rem; font-size: var(--text-sm); letter-spacing: 0.025em; }
  .btn-lg { padding: 0.875rem 2.25rem;  font-size: var(--text-base); }

  /* grain */
  .grain::after {
    content: "";
    position: fixed;
    inset: 0;
    z-index: 9999;
    pointer-events: none;
    opacity: 0.030;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='300' height='300'%3E%3Cfilter id='g'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.75' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='300' height='300' filter='url(%23g)'/%3E%3C/svg%3E");
  }

  /* ── typography ──────────────────────────────────────── */

  .display {
    font-family: var(--font-sans);
    font-weight: 700;
    line-height: 1.0;
    letter-spacing: -0.04em;
    color: var(--color-fg);
  }

  .headline {
    font-family: var(--font-sans);
    font-weight: 600;
    line-height: 1.15;
    letter-spacing: -0.025em;
    color: var(--color-fg);
  }

  .label {
    font-family: var(--font-sans);
    font-size: var(--text-xs);
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 0.18em;
    color: var(--color-fg-3);
  }

  .body-dim {
    font-family: var(--font-sans);
    font-size: var(--text-base);
    line-height: 1.65;
    color: var(--color-fg-2);
  }

  /* ── card ─────────────────────────────────────────── */

  .card {
    background: var(--color-base);
    border: 1px solid var(--color-line);
    border-radius: var(--radius-xl);
    padding: 2rem;
  }

  /* ── section band (alternating bg) ──────────────────── */

  .band {
    background: var(--color-base);
    border-top: 1px solid var(--color-line);
    border-bottom: 1px solid var(--color-line);
  }

  /* ── divider ─────────────────────────────────────────── */

  .rule {
    border: none;
    height: 1px;
    background: var(--color-line);
    @apply my-0;
  }

  /* ── faq ─────────────────────────────────────────────── */

  .faq-item {
    border-bottom: 1px solid var(--color-line);
  }

  .faq-trigger {
    @apply w-full flex items-center justify-between gap-4 py-6;
    background: transparent;
    border: none;
    cursor: pointer;
    font-family: var(--font-sans);
    font-size: var(--text-md);
    font-weight: 500;
    letter-spacing: -0.01em;
    color: var(--color-fg-2);
    text-align: left;
    transition: color var(--t-fast) var(--ease-out);
  }
  .faq-trigger:hover { color: var(--color-fg); }
  .faq-trigger[data-state="open"] { color: var(--color-fg); }

  .faq-chevron {
    flex-shrink: 0;
    color: var(--color-fg-3);
    transition: transform var(--t-ease) var(--ease-out),
                color var(--t-fast) var(--ease-out);
  }
  .faq-trigger[data-state="open"] .faq-chevron {
    transform: rotate(180deg);
    color: var(--color-cyan-dim);
  }

  .faq-answer {
    font-family: var(--font-sans);
    font-size: var(--text-base);
    line-height: 1.65;
    color: var(--color-fg-2);
    padding-bottom: 1.5rem;
  }

  .faq-content {
    overflow: hidden;
  }
  .faq-content[data-state="open"] {
    animation: accordion-open var(--t-ease) var(--ease-out);
  }
  .faq-content[data-state="closed"] {
    animation: accordion-close var(--t-base) var(--ease-in) forwards;
  }

  /* ── form ────────────────────────────────────────────── */

  .input {
    @apply w-full px-0 py-3;
    background: transparent;
    border: none;
    border-bottom: 1px solid var(--color-line);
    color: var(--color-fg);
    font-family: var(--font-sans);
    font-size: var(--text-base);
    transition: border-color var(--t-fast) var(--ease-out);
  }
  .input::placeholder { color: var(--color-fg-3); }
  .input:focus {
    outline: none;
    border-bottom-color: var(--color-cyan-dim);
  }

  .input-label {
    font-family: var(--font-sans);
    font-size: var(--text-xs);
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 0.14em;
    color: var(--color-fg-3);
    @apply block mb-1;
  }

  /* ── wordmark ─────────────────────────────────────────── */

  .wordmark {
    font-family: var(--font-sans);
    font-weight: 600;
    font-size: var(--text-sm);
    letter-spacing: 0.12em;
    text-transform: uppercase;
    color: var(--color-fg-3);
    text-decoration: none;
    transition: color var(--t-ease) var(--ease-out);
  }
  .wordmark:hover {
    color: var(--color-fg);
  }

  /* ── "send another" link ─────────────────────────────── */

  .link-subtle {
    font-family: var(--font-sans);
    font-size: var(--text-sm);
    color: var(--color-fg-3);
    background: transparent;
    border: none;
    cursor: pointer;
    text-decoration: underline;
    text-underline-offset: 4px;
    text-decoration-color: var(--color-line);
    transition: color var(--t-ease) var(--ease-out),
                text-decoration-color var(--t-ease) var(--ease-out);
  }
  .link-subtle:hover {
    color: var(--color-fg-2);
    text-decoration-color: var(--color-fg-3);
  }
}

/* ═══ KEYFRAMES ══════════════════════════════════════════════════════ */

@keyframes node-pulse {
  0%, 100% { opacity: 0.45; r: 1.8; }
  50%      { opacity: 1;    r: 3.5; }
}

@keyframes edge-breathe {
  0%, 100% { opacity: 0.08; }
  50%      { opacity: 0.35; }
}

@keyframes accordion-open {
  from { height: 0; }
  to   { height: var(--radix-accordion-content-height); }
}

@keyframes accordion-close {
  from { height: var(--radix-accordion-content-height); }
  to   { height: 0; }
}

/* ═══ REDUCED MOTION ═════════════════════════════════════════════════ */

@media (prefers-reduced-motion: reduce) {
  .mesh-node,
  .mesh-edge {
    animation: none;
  }
  .mesh-node { opacity: 0.7; }
  .mesh-edge { opacity: 0.18; }
}
